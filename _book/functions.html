<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Let’s find a good title</title>
  <meta name="description" content="LEt’s add somethign here">
  <meta name="generator" content="bookdown 0.4.1 and GitBook 2.6.7">

  <meta property="og:title" content="Let’s find a good title" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="LEt’s add somethign here" />
  <meta name="github-repo" content="smac-group/ds" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Let’s find a good title" />
  
  <meta name="twitter:description" content="LEt’s add somethign here" />
  

<meta name="author" content="Stéphane Guerrier, Justin Lee &amp; Roberto Molinari">


<meta name="date" content="2017-07-19">

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="control.html">
<link rel="next" href="build-a-package.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />









<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">A Minimal Book Example</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduction</a></li>
<li class="chapter" data-level="2" data-path="data.html"><a href="data.html"><i class="fa fa-check"></i><b>2</b> Data Structures</a><ul>
<li class="chapter" data-level="2.1" data-path="data.html"><a href="data.html#vectors"><i class="fa fa-check"></i><b>2.1</b> Vectors</a><ul>
<li class="chapter" data-level="2.1.1" data-path="data.html"><a href="data.html#type"><i class="fa fa-check"></i><b>2.1.1</b> Type</a></li>
<li class="chapter" data-level="2.1.2" data-path="data.html"><a href="data.html#coercion"><i class="fa fa-check"></i><b>2.1.2</b> Coercion</a></li>
<li class="chapter" data-level="2.1.3" data-path="data.html"><a href="data.html#subsetting"><i class="fa fa-check"></i><b>2.1.3</b> Subsetting</a></li>
<li class="chapter" data-level="2.1.4" data-path="data.html"><a href="data.html#vectattr"><i class="fa fa-check"></i><b>2.1.4</b> Attributes</a></li>
<li class="chapter" data-level="2.1.5" data-path="data.html"><a href="data.html#addlab"><i class="fa fa-check"></i><b>2.1.5</b> Adding labels</a></li>
<li class="chapter" data-level="2.1.6" data-path="data.html"><a href="data.html#useful-functions-with-vectors"><i class="fa fa-check"></i><b>2.1.6</b> Useful functions with vectors</a></li>
<li class="chapter" data-level="2.1.7" data-path="data.html"><a href="data.html#creation-sequences"><i class="fa fa-check"></i><b>2.1.7</b> Creation sequences</a></li>
<li class="chapter" data-level="2.1.8" data-path="data.html"><a href="data.html#example-apple-stock-price"><i class="fa fa-check"></i><b>2.1.8</b> Example: Apple Stock Price</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="data.html"><a href="data.html#matrix"><i class="fa fa-check"></i><b>2.2</b> Matrix</a><ul>
<li class="chapter" data-level="2.2.1" data-path="data.html"><a href="data.html#subsetting-1"><i class="fa fa-check"></i><b>2.2.1</b> Subsetting</a></li>
<li class="chapter" data-level="2.2.2" data-path="data.html"><a href="data.html#useful-fun-matrix-algebra"><i class="fa fa-check"></i><b>2.2.2</b> Useful fun + matrix algebra</a></li>
<li class="chapter" data-level="2.2.3" data-path="data.html"><a href="data.html#example-variance-as-matrix"><i class="fa fa-check"></i><b>2.2.3</b> Example: variance as matrix</a></li>
<li class="chapter" data-level="2.2.4" data-path="data.html"><a href="data.html#example-least-squares"><i class="fa fa-check"></i><b>2.2.4</b> Example: Least-squares</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="data.html"><a href="data.html#array"><i class="fa fa-check"></i><b>2.3</b> Array</a></li>
<li class="chapter" data-level="2.4" data-path="data.html"><a href="data.html#list"><i class="fa fa-check"></i><b>2.4</b> List</a></li>
<li class="chapter" data-level="2.5" data-path="data.html"><a href="data.html#dataframe"><i class="fa fa-check"></i><b>2.5</b> Dataframe</a><ul>
<li class="chapter" data-level="2.5.1" data-path="data.html"><a href="data.html#example-making-maps"><i class="fa fa-check"></i><b>2.5.1</b> Example: Making Maps</a></li>
</ul></li>
<li class="chapter" data-level="2.6" data-path="data.html"><a href="data.html#data-frames"><i class="fa fa-check"></i><b>2.6</b> Data frames</a><ul>
<li class="chapter" data-level="2.6.1" data-path="data.html"><a href="data.html#combination"><i class="fa fa-check"></i><b>2.6.1</b> Combination</a></li>
<li class="chapter" data-level="2.6.2" data-path="data.html"><a href="data.html#subsetting-2"><i class="fa fa-check"></i><b>2.6.2</b> Subsetting</a></li>
<li class="chapter" data-level="2.6.3" data-path="data.html"><a href="data.html#application-non-parametric-bootstrap"><i class="fa fa-check"></i><b>2.6.3</b> Application: Non-parametric bootstrap</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="control.html"><a href="control.html"><i class="fa fa-check"></i><b>3</b> Logical Operators and Control Stuctures</a><ul>
<li class="chapter" data-level="3.1" data-path="control.html"><a href="control.html#logical-operators"><i class="fa fa-check"></i><b>3.1</b> Logical Operators</a></li>
<li class="chapter" data-level="3.2" data-path="control.html"><a href="control.html#control-structures"><i class="fa fa-check"></i><b>3.2</b> Control Structures</a><ul>
<li class="chapter" data-level="3.2.1" data-path="control.html"><a href="control.html#selection-controls"><i class="fa fa-check"></i><b>3.2.1</b> Selection Controls</a></li>
<li class="chapter" data-level="3.2.2" data-path="control.html"><a href="control.html#iteration-controls"><i class="fa fa-check"></i><b>3.2.2</b> Iteration Controls</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="control.html"><a href="control.html#applications"><i class="fa fa-check"></i><b>3.3</b> Applications:</a><ul>
<li class="chapter" data-level="3.3.1" data-path="control.html"><a href="control.html#non-parametric-bootstrap"><i class="fa fa-check"></i><b>3.3.1</b> Non-parametric Bootstrap</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="functions.html"><a href="functions.html"><i class="fa fa-check"></i><b>4</b> Functions</a><ul>
<li class="chapter" data-level="4.1" data-path="functions.html"><a href="functions.html#function-arguments"><i class="fa fa-check"></i><b>4.1</b> Function arguments</a></li>
<li class="chapter" data-level="4.2" data-path="functions.html"><a href="functions.html#function-body"><i class="fa fa-check"></i><b>4.2</b> Function body</a></li>
<li class="chapter" data-level="4.3" data-path="functions.html"><a href="functions.html#function-environment"><i class="fa fa-check"></i><b>4.3</b> Function environment</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="build-a-package.html"><a href="build-a-package.html"><i class="fa fa-check"></i><b>5</b> Build a package</a></li>
<li class="chapter" data-level="6" data-path="case-study-monte-carlo-integration.html"><a href="case-study-monte-carlo-integration.html"><i class="fa fa-check"></i><b>6</b> Case Study: Monte-Carlo Integration</a></li>
<li class="chapter" data-level="7" data-path="chap-graphs.html"><a href="chap-graphs.html"><i class="fa fa-check"></i><b>7</b> Graphics</a></li>
<li class="chapter" data-level="8" data-path="r-markdown.html"><a href="r-markdown.html"><i class="fa fa-check"></i><b>8</b> R Markdown</a><ul>
<li class="chapter" data-level="8.1" data-path="r-markdown.html"><a href="r-markdown.html#including-plots"><i class="fa fa-check"></i><b>8.1</b> Including Plots</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Let’s find a good title</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="functions" class="section level1">
<h1><span class="header-section-number">Chapter 4</span> Functions</h1>
<p>This chapter aims at highlighting the main advantages, characteristics, arguments and structure of functions in R. As you already know, a function is a collection of logically connected commands and operations that allow the user to input some arguments and obtain a desired output (based on the given arguments) without having to rewrite the mentioned code each time that specific output is needed. Indeed, a common task in statistical research consists in running some simulation studies which give support (or not) to the use of a certain method of inference. In this case, it’s not efficient to rewrite the code each time it is needed within a simulation study because it would lead to lengthy code and increased risk of miss-coding.</p>
<p>Considering this, in the previous chapter we discussed the non-parametric bootstrap which is a technique used to perform statistical inference in different cases (e.g. small sample sizes, uncertainty on the distribution of the underlying variable, etc.). However, there exist many other types of bootstrap techniques, including the parametric bootstrap which assumes a parametric model for the data (e.g. a Gaussian distribution with mean <span class="math inline">\(\mu\)</span> and variance <span class="math inline">\(\sigma^2\)</span> that represent the parameters). For this bootstrap technique, we assume that we know the underlying model generating the data and therefore estimate its parameters. Once this is done, we use the estimated parameters as if they were the true parameters and use them to simulate from the assumed model. In this manner we generate a parametric bootstrap sample on which we can compute the statistic we are intersted in (e.g. the sample mean), thereby obtaining a distribution for this statistic by simulating many other samples.</p>
<p>What are the advantages of these different inferential methods? Which approach appears to be preferable to the others and under what circumstances? We can run some specific simulation studies to get an idea of the answers to these questions but, to do so, we will need to create functions the implement these methods. The next sections will present the main features of functions in R by studying their main components. R functions have three main components to them:</p>
<ul>
<li><em>body</em>: the code lines containing the commands and operations which deliver the desired output;</li>
<li><em>arguments</em>: the inputs the user gives to the function which will determine the value or type of output of a function;</li>
<li><em>environment</em>: every R function is built within an enviroment of reference from which to source possible input values and/or other functions necessary for it to work.</li>
</ul>
<p>We will briefly go over these components by building a function implementing the non-parametric bootstrap to find a confidence interval for the sample mean which we saw in the previous chapter:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">nonpar_boot &lt;-<span class="st"> </span>function(x, <span class="dt">B =</span> <span class="dv">500</span>, <span class="dt">alpha =</span> <span class="fl">0.05</span>) {
  
  boot_mean &lt;-<span class="st"> </span><span class="kw">rep</span>(<span class="ot">NA</span>, B)
  n &lt;-<span class="st"> </span><span class="kw">length</span>(x)

  for (i in <span class="dv">1</span>:B) {
    
    sample_star =<span class="st"> </span>x[<span class="kw">sample</span>(<span class="dv">1</span>:n, <span class="dt">replace =</span> <span class="ot">TRUE</span>)]
    boot_mean[i] =<span class="st"> </span><span class="kw">mean</span>(sample_star)
    
  }

  <span class="kw">return</span>(<span class="kw">quantile</span>(boot_mean, <span class="kw">c</span>(alpha/<span class="dv">2</span>, <span class="dv">1</span> -<span class="st"> </span>alpha/<span class="dv">2</span>)))
  
}</code></pre></div>
<div id="function-arguments" class="section level2">
<h2><span class="header-section-number">4.1</span> Function arguments</h2>
<p>As you can see, the function’s name is “nonpar_boot( )” and it has three arguments to it:</p>
<ul>
<li>“x” which represents the original sample on which we would like to perform the bootstrap procedure;</li>
<li>“B” which represents the number of bootstrap samples we wish to generate;</li>
<li>“alpha” which determines the size of the confidence interval we wish to compute</li>
</ul>
<p>The function therefore has three arguments to it and these can be extracted by using the function “formals( )”</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">formals</span>(nonpar_boot)</code></pre></div>
<pre><code>## $x
## 
## 
## $B
## [1] 500
## 
## $alpha
## [1] 0.05</code></pre>
<p>A feature which can be underlined at this stage is that, as can be seen for the above mentioned function, it is possible to provide default values for some, all or none of the function arguments. In this case, default values have been given for the arguments B and alpha, consequently the user does not need to specify the value of these arguments unless they wish to specify different values compared to the default values given.</p>

<div class="rmdnote">
R functions are quite flexible when specifying the arguments. These can in fact be specified by exact name, prefix matching or position (and are given priority in this order). For example, one could specify the arguments for the above non-parametric bootstrap function as follows “nonpar_boot(B = 200, sim, a = 0.1)” where the object “sim” is the sample which in the function is named “x”. For a more in-depth overview of this feature refer to <span class="citation">Wickham (<a href="#ref-wickham2014advanced">2014</a>)</span>.
</div>
<p></p>
</div>
<div id="function-body" class="section level2">
<h2><span class="header-section-number">4.2</span> Function body</h2>
</div>
<div id="function-environment" class="section level2">
<h2><span class="header-section-number">4.3</span> Function environment</h2>

</div>
</div>
<h3>References</h3>
<div id="refs" class="references">
<div id="ref-wickham2014advanced">
<p>Wickham, Hadley. 2014. <em>Advanced R</em>. CRC Press.</p>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="control.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="build-a-package.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"weibo": false,
"instapper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/rstudio/bookdown-demo/edit/master/03-functions.Rmd",
"text": "Edit"
},
"download": ["bookdown-demo.pdf", "bookdown-demo.epub"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://cdn.bootcss.com/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:" && /^https?:/.test(script.src))
      script.src  = script.src.replace(/^https?:/, '');
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
